# $ZJU-I$机械臂雅可比矩阵计算实验报告

## 1. 实验目的

本次实验的目的是推导并计算$ZJU-I$机械臂其在**零点位置 $q = [0, 0, 0, 0, 0, 0]$** 时的雅可比矩阵 $J(q)$。

## 2. 机械臂 D-H 参数

### 2.1 原始 D-H 参数表

下表为本次实验所用机械臂的原始D-H参数表。所有关节均为旋转关节。

| 连杆 (No.) | $a_i$ | $\alpha_i$ | $d_i$ | $\theta_i$ (变量) |
| :---: | :---: | :---: | :---: | :---: |
| 1 | 0 | -90° | 230mm | $\theta_1$ |
| 2 | 185mm | 0 | -54mm | $\theta_2$ (-90°) |
| 3 | 170mm | 0 | 0 | $\theta_3$ |
| 4 | 0 | 90° | 77mm | $\theta_4$ (90°) |
| 5 | 0 | 90° | 77mm | $\theta_5$ (90°) |
| 6 | 0 | 0 | 85.5mm | $\theta_6$ |

### 2.2 用于计算的 D-H 参数（标准化）

为便于计算，我们将长度单位统一为**米（m）**，并明确定义关节变量 $\theta_i$ 与D-H参数表中的实际角度 $\theta_i^*$ 之间的关系。

| 连杆 $i$ | $a_i$ (m) | $\alpha_i$ (rad) | $d_i$ (m) | 关节角 $\theta_i^*$ |
| :---: | :---: | :---: | :---: | :---: |
| 1 | 0 | $-\pi/2$ | 0.230 | $\theta_1$ |
| 2 | 0.185 | 0 | -0.054 | $\theta_2 - \pi/2$ |
| 3 | 0.170 | 0 | 0 | $\theta_3$ |
| 4 | 0 | $\pi/2$ | 0.077 | $\theta_4 + \pi/2$ |
| 5 | 0 | $\pi/2$ | 0.077 | $\theta_5 + \pi/2$ |
| 6 | 0 | 0 | 0.0855 | $\theta_6$ |

## 3. 雅可比矩阵推导过程


### 3.1 计算状态

我们计算在**零点位置 $q = [0, 0, 0, 0, 0, 0]$** 时的雅可比矩阵。根据 2.2 节的定义，此时用于计算的实际D-H角度 $\theta_i^*$ 为：

* $\theta_1^* = \theta_1 = 0$
* $\theta_2^* = \theta_2 - \pi/2 = 0 - 90^\circ = -90^\circ$
* $\theta_3^* = \theta_3 = 0$
* $\theta_4^* = \theta_4 + \pi/2 = 0 + 90^\circ = 90^\circ$
* $\theta_5^* = \theta_5 + \pi/2 = 0 + 90^\circ = 90^\circ$
* $\theta_6^* = \theta_6 = 0$

### 3.2 计算齐次变换矩阵 $A_i(q=0)$

标准的D-H变换矩阵 $A_i$ 定义为：
$$
A_i = \text{Rot}_z(\theta_i^*) \cdot \text{Trans}_z(d_i) \cdot \text{Trans}_x(a_i) \cdot \text{Rot}_x(\alpha_i)
$$
代入 $q=0$ 时的参数（使用 $\cos$, $\sin$ 简写为 $c, s$）：

$A_1 = \begin{bmatrix} c_1 & -s_1c\alpha_1 & s_1s\alpha_1 & a_1c_1 \\ s_1 & c_1c\alpha_1 & -c_1s\alpha_1 & a_1s_1 \\ 0 & s\alpha_1 & c\alpha_1 & d_1 \\ 0 & 0 & 0 & 1 \end{bmatrix} = \begin{bmatrix} 1 & 0 & 0 & 0 \\ 0 & 0 & 1 & 0 \\ 0 & -1 & 0 & 0.23 \\ 0 & 0 & 0 & 1 \end{bmatrix}$ (因 $\theta_1^*=0, \alpha_1=-90^\circ$)

$A_2 = \begin{bmatrix} 0 & -1 & 0 & 0 \\ -1 & 0 & 0 & -0.185 \\ 0 & 0 & 1 & -0.054 \\ 0 & 0 & 0 & 1 \end{bmatrix}$ (因 $\theta_2^*=-90^\circ, \alpha_2=0$)

$A_3 = \begin{bmatrix} 1 & 0 & 0 & 0.170 \\ 0 & 1 & 0 & 0 \\ 0 & 0 & 1 & 0 \\ 0 & 0 & 0 & 1 \end{bmatrix}$ (因 $\theta_3^*=0, \alpha_3=0$)

$A_4 = \begin{bmatrix} 0 & 0 & 1 & 0 \\ 1 & 0 & 0 & 0 \\ 0 & 1 & 0 & 0.077 \\ 0 & 0 & 0 & 1 \end{bmatrix}$ (因 $\theta_4^*=90^\circ, \alpha_4=90^\circ$)

$A_5 = \begin{bmatrix} 0 & 0 & 1 & 0 \\ 1 & 0 & 0 & 0 \\ 0 & 1 & 0 & 0.077 \\ 0 & 0 & 0 & 1 \end{bmatrix}$ (因 $\theta_5^*=90^\circ, \alpha_5=90^\circ$)

$A_6 = \begin{bmatrix} 1 & 0 & 0 & 0 \\ 0 & 1 & 0 & 0 \\ 0 & 0 & 1 & 0.0855 \\ 0 & 0 & 0 & 1 \end{bmatrix}$ (因 $\theta_6^*=0, \alpha_6=0$)

### 3.3 计算累积变换矩阵 $T_0^i$

$T_0^i = A_1 A_2 \cdots A_i$。 $T_0^i$ 的前三列构成了旋转矩阵 $R_0^i$，第四列构成了位置向量 $p_i$。

$T_0^0 = \begin{bmatrix} 1 & 0 & 0 & 0 \\ 0 & 1 & 0 & 0 \\ 0 & 0 & 1 & 0 \\ 0 & 0 & 0 & 1 \end{bmatrix}$

$T_0^1 = A_1 = \begin{bmatrix} 1 & 0 & 0 & 0 \\ 0 & 0 & 1 & 0 \\ 0 & -1 & 0 & 0.23 \\ 0 & 0 & 0 & 1 \end{bmatrix}$

$T_0^2 = T_0^1 A_2 = \begin{bmatrix} 0 & 1 & 0 & 0 \\ 0 & 0 & 1 & -0.054 \\ 1 & 0 & 0 & 0.415 \\ 0 & 0 & 0 & 1 \end{bmatrix}$ (0.415 = 0.23 - (-0.185)) 

$T_0^3 = T_0^2 A_3 = \begin{bmatrix} 0 & 1 & 0 & 0 \\ 0 & 0 & 1 & -0.054 \\ 1 & 0 & 0 & 0.585 \\ 0 & 0 & 0 & 1 \end{bmatrix}$ (0.585 = 0.415 + 0.170)

$T_0^4 = T_0^3 A_4 = \begin{bmatrix} 1 & 0 & 0 & 0 \\ 0 & 1 & 0 & 0.023 \\ 0 & 0 & 1 & 0.585 \\ 0 & 0 & 0 & 1 \end{bmatrix}$ (0.023 = -0.054 + 0.077)

$T_0^5 = T_0^4 A_5 = \begin{bmatrix} 0 & 0 & 1 & 0 \\ 1 & 0 & 0 & 0.023 \\ 0 & 1 & 0 & 0.662 \\ 0 & 0 & 0 & 1 \end{bmatrix}$ (0.662 = 0.585 + 0.077)

$T_0^6 = T_0^5 A_6 = \begin{bmatrix} 0 & 0 & 1 & 0.0855 \\ 1 & 0 & 0 & 0.023 \\ 0 & 1 & 0 & 0.662 \\ 0 & 0 & 0 & 1 \end{bmatrix}$

### 3.4 提取 $z$ 向量和 $p$ 向量

$z_{i-1}$ 是 $R_0^{i-1}$ 的第三列。$p_{i-1}$ 是 $T_0^{i-1}$ 的第四列。
末端位置 $p_6 = [0.0855, 0.023, 0.662]^T$。

* **$i=1$:**
    * $z_0 = [0, 0, 1]^T$
    * $p_0 = [0, 0, 0]^T$
    * $p_6 - p_0 = [0.0855, 0.023, 0.662]^T$
* **$i=2$:**
    * $z_1 = [0, 1, 0]^T$ (来自 $T_0^1$ 的第3列)
    * $p_1 = [0, 0, 0.23]^T$
    * $p_6 - p_1 = [0.0855, 0.023, 0.432]^T$
* **$i=3$:**
    * $z_2 = [0, 1, 0]^T$ (来自 $T_0^2$ 的第3列)
    * $p_2 = [0, -0.054, 0.415]^T$
    * $p_6 - p_2 = [0.0855, 0.077, 0.247]^T$
* **$i=4$:**
    * $z_3 = [0, 1, 0]^T$ (来自 $T_0^3$ 的第3列)
    * $p_3 = [0, -0.054, 0.585]^T$
    * $p_6 - p_3 = [0.0855, 0.077, 0.077]^T$
* **$i=5$:**
    * $z_4 = [0, 0, 1]^T$ (来自 $T_0^4$ 的第3列)
    * $p_4 = [0, 0.023, 0.585]^T$
    * $p_6 - p_4 = [0.0855, 0, 0.077]^T$
* **$i=6$:**
    * $z_5 = [1, 0, 0]^T$ (来自 $T_0^5$ 的第3列)
    * $p_5 = [0, 0.023, 0.662]^T$
    * $p_6 - p_5 = [0.0855, 0, 0]^T$

### 3.5 计算雅可比矩阵各列 $J_i$

$J_i = [ (z_{i-1} \times (p_6 - p_{i-1}))^T, (z_{i-1})^T ]^T$

* **$J_1$**:
    * $J_{v,1} = z_0 \times (p_6 - p_0) = [0, 0, 1]^T \times [0.0855, 0.023, 0.662]^T = [-0.023, 0.0855, 0]^T$
    * $J_{\omega,1} = z_0 = [0, 0, 1]^T$
    * $J_1 = [-0.023, 0.0855, 0, 0, 0, 1]^T$

* **$J_2$**:
    * $J_{v,2} = z_1 \times (p_6 - p_1) = [0, 1, 0]^T \times [0.0855, 0.023, 0.432]^T = [0.432, 0, -0.0855]^T$
    * $J_{\omega,2} = z_1 = [0, 1, 0]^T$
    * $J_2 = [0.432, 0, -0.0855, 0, 1, 0]^T$

* **$J_3$**:
    * $J_{v,3} = z_2 \times (p_6 - p_2) = [0, 1, 0]^T \times [0.0855, 0.077, 0.247]^T = [0.247, 0, -0.0855]^T$
    * $J_{\omega,3} = z_2 = [0, 1, 0]^T$
    * $J_3 = [0.247, 0, -0.0855, 0, 1, 0]^T$

* **$J_4$**:
    * $J_{v,4} = z_3 \times (p_6 - p_3) = [0, 1, 0]^T \times [0.0855, 0.077, 0.077]^T = [0.077, 0, -0.0855]^T$
    * $J_{\omega,4} = z_3 = [0, 1, 0]^T$
    * $J_4 = [0.077, 0, -0.0855, 0, 1, 0]^T$

* **$J_5$**:
    * $J_{v,5} = z_4 \times (p_6 - p_4) = [0, 0, 1]^T \times [0.0855, 0, 0.077]^T = [0, 0.0855, 0]^T$
    * $J_{\omega,5} = z_4 = [0, 0, 1]^T$
    * $J_5 = [0, 0.0855, 0, 0, 0, 1]^T$

* **$J_6$**:
    * $J_{v,6} = z_5 \times (p_6 - p_5) = [1, 0, 0]^T \times [0.0855, 0, 0]^T = [0, 0, 0]^T$
    * $J_{\omega,6} = z_5 = [1, 0, 0]^T$
    * $J_6 = [0, 0, 0, 1, 0, 0]^T$

## 4. 雅可比矩阵 $J(q=0)$

将上述6个列向量 $J_1$ 到 $J_6$ 组合成 $6 \times 6$ 矩阵，得到在零点位置 $q = [0, 0, 0, 0, 0, 0]$ 时的雅可比矩阵：
$$
J(q=0) = \begin{bmatrix}
J_{v} \\
J_{\omega}
\end{bmatrix} =
\begin{bmatrix}
J_1 & J_2 & J_3 & J_4 & J_5 & J_6
\end{bmatrix}
$$


$$
J(q=0) = \begin{bmatrix}
-0.023 & 0.432 & 0.247 & 0.077 & 0 & 0 \\
0.0855 & 0 & 0 & 0 & 0.0855 & 0 \\
0 & -0.0855 & -0.0855 & -0.0855 & 0 & 0 \\
0 & 0 & 0 & 0 & 0 & 1 \\
0 & 1 & 1 & 1 & 0 & 0 \\
1 & 0 & 0 & 0 & 1 & 0
\end{bmatrix}
$$
